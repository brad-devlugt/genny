SchemaVersion: 2018-07-01

Description: |
  This is a collection of helper scripts used to communicate with mongosync. To use them,
  use LoadConfig and load the script you would like to use in your actor's phase.
  For example:
  - Name: StartMongosync
    Type: ExternalScriptRunner
    Threads: 1
    Phases:
      - LoadConfig:
        Path: ./MongosyncScripts.yml
        Key: StartMongosync

StartMongosync:
  Repeat: 1
  Command: python3
  MetricsName: StartMongosync
  ScriptPath: ./src/genny/src/workloads/c2c/mongosync_helpers.py -m start

PollForCEA:
  Repeat: 1
  Command: python3
  MetricsName: PollForCEA
  ScriptPath: ./src/genny/src/workloads/c2c/mongosync_helpers.py -m poll_for_cea

DrainWrites:
  Repeat: 1
  Command: python3
  MetricsName: DrainWrites
  ScriptPath: ./src/genny/src/workloads/c2c/mongosync_helpers.py -m drain_writes

Commit:
  Repeat: 1
  Command: python3
  MetricsName: Commit
  ScriptPath: ./src/genny/src/workloads/c2c/mongosync_helpers.py -m commit

WaitForCommit:
  Repeat: 1
  Command: python3
  MetricsName: WaitForCommit
  ScriptPath: ./src/genny/src/workloads/c2c/mongosync_helpers.py -m wait_for_commit
