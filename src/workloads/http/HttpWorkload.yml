SchemaVersion: 2018-07-01
Owner: "@mongodb/product-perf"
Description: Basic workload to test an HTTP service

HttpClients:
    URL: http://localhost:3000

Actors:
- Name: PostRequests
  Type: HttpActor
  Threads: 1
  Phases:
    - #Duration: 10 seconds
      Repeat: 2
      Operation: POST
      Route: /my/other/route
      #GlobalRate: 1 per 2 seconds
      Body:
        foo: {^RandomInt: {min: 5, max: 15} }
    - &Nop {Nop: true}
    - *Nop

- Name: GetRequests
  Type: HttpActor
  Threads: 1
  Phases:
    - *Nop
    - #Duration: 10 seconds
      Repeat: 2
      Operation: GET
      Route: /my/api/route
      #GlobalRate: 1 per 1 seconds
    - *Nop

- Name: PollTest
  Type: HttpPoller
  Threads: 1
  Phases:
    - *Nop
    - *Nop
    - Route: /my/api/route
      Repeat: 1

- Name: LoggingActor
  Type: LoggingActor
  Threads: 1
  Phases:
    - *Nop
    - *Nop
    - LogEvery: 1 second
      Blocking: None